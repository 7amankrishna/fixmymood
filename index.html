<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Fix My Mood</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="bg-particles">
  <div class="orb"></div>
  <div class="orb"></div>
  <div class="orb"></div>
</div>

<div class="toast" id="toast"></div>

<div class="app-container">

  <header class="app-header">
    <div class="logo">Fix My Mood</div>
    <div class="tagline">Your Pocket Wellness Companion</div>
  </header>

  <section class="page active" id="page-home">
    <div class="greeting" id="greeting">Good Evening ğŸ‘‹</div>
    <div class="greeting-sub">How are you feeling right now?</div>

    <div id="mood-selection">
      <div class="mood-grid">
        <div class="mood-btn" data-mood="sad" onclick="selectMood(this)">
          <span class="emoji">ğŸ˜”</span>
          <span class="mood-label">Sad</span>
        </div>
        <div class="mood-btn" data-mood="angry" onclick="selectMood(this)">
          <span class="emoji">ğŸ˜¡</span>
          <span class="mood-label">Angry</span>
        </div>
        <div class="mood-btn" data-mood="anxious" onclick="selectMood(this)">
          <span class="emoji">ğŸ˜°</span>
          <span class="mood-label">Anxious</span>
        </div>
        <div class="mood-btn" data-mood="tired" onclick="selectMood(this)">
          <span class="emoji">ğŸ˜´</span>
          <span class="mood-label">Tired</span>
        </div>
        <div class="mood-btn full-width" data-mood="normal" onclick="selectMood(this)">
          <span class="emoji">ğŸ™‚</span>
          <span class="mood-label">Normal</span>
        </div>
      </div>
      <button class="fix-btn" id="fixBtn" disabled onclick="fixMyMood()">âœ¨ Fix My Mood</button>
    </div>

    <div class="fix-result" id="fix-result"></div>
  </section>

  <section class="page" id="page-meditation">
    <div class="section-title">ğŸ§˜ Meditation Hub</div>
    <div class="section-subtitle">Choose a practice to calm your mind</div>

    <div class="meditation-grid">
      <div class="med-card" onclick="openTratak()">
        <div class="med-icon">ğŸ•¯ï¸</div>
        <div class="med-info">
          <h3>Tratak Meditation</h3>
          <p>Focus on a flame to sharpen concentration</p>
        </div>
        <span class="med-arrow">â€º</span>
      </div>
      <div class="med-card" onclick="openBreathing()">
        <div class="med-icon">ğŸŒ¬ï¸</div>
        <div class="med-info">
          <h3>Breathing Exercise</h3>
          <p>Box breathing & 4-7-8 technique</p>
        </div>
        <span class="med-arrow">â€º</span>
      </div>
      <div class="med-card" onclick="openTimerMed()">
        <div class="med-icon">â±ï¸</div>
        <div class="med-info">
          <h3>Silent Meditation</h3>
          <p>Timed silent session with bell</p>
        </div>
        <span class="med-arrow">â€º</span>
      </div>
      <div class="med-card" onclick="navigateTo('quotes')">
        <div class="med-icon">ğŸ’¬</div>
        <div class="med-info">
          <h3>Motivational Quotes</h3>
          <p>Get inspired with powerful words</p>
        </div>
        <span class="med-arrow">â€º</span>
      </div>
    </div>
  </section>

  <section class="page" id="page-quotes">
    <div class="section-title">ğŸ’¬ Daily Inspiration</div>
    <div class="section-subtitle">Words that heal and empower â€” fetched live from GitHub</div>

    <div class="quote-controls">
      <input type="text" class="quote-search" id="quoteSearch"
        placeholder="ğŸ” Search quotes..." oninput="searchQuotes(this.value)">
      <button class="quote-refresh-btn" id="refreshBtn" onclick="refetchQuotes()" title="Re-fetch from GitHub">ğŸ”„</button>
    </div>

    <div class="glass-card quote-display" id="quoteDisplay">
      <div class="quote-loading" id="quoteLoading">
        <div class="spinner"></div>
        <div class="loading-text">Fetching quotes from GitHub...</div>
      </div>
      <div id="quoteContent" style="display:none">
        <div class="quote-mark">"</div>
        <div class="quote-text" id="quoteText">Loading...</div>
        <div class="quote-author" id="quoteAuthor"></div>
        <div class="quote-source" id="quoteSource">
          <span class="dot"></span>
          <span id="sourceLabel">Loading</span>
        </div>
        <div class="quote-count" id="quoteCount"></div>
        <button class="new-quote-btn" onclick="showRandomQuote()">âœ¨ New Quote</button>
      </div>
    </div>

    <div id="searchResults" style="display:none"></div>
  </section>

  <section class="page" id="page-history">
    <div class="section-title">ğŸ“Š Mood History</div>
    <div class="section-subtitle">Track your emotional journey</div>

    <div class="history-stats">
      <div class="stat-card">
        <div class="stat-number" id="statTotal">0</div>
        <div class="stat-label">Total</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="statFixed">0</div>
        <div class="stat-label">Fixed</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="statStreak">0</div>
        <div class="stat-label">Streak</div>
      </div>
    </div>

    <div class="glass-card">
      <div style="font-size:13px;font-weight:600;margin-bottom:10px;color:var(--text-secondary)">MOOD DISTRIBUTION</div>
      <div class="mood-chart" id="moodChart"></div>
    </div>

    <div class="history-list" id="historyList">
      <div class="empty-state">
        <div class="empty-icon">ğŸ“</div>
        <p>No mood entries yet.<br>Start by selecting your mood!</p>
      </div>
    </div>

    <button class="clear-history-btn" onclick="clearHistory()" id="clearBtn" style="display:none">
      ğŸ—‘ï¸ Clear All History
    </button>
  </section>
</div>

<nav class="bottom-nav">
  <div class="nav-inner">
    <div class="nav-item active" onclick="navigateTo('home')" data-page="home">
      <span class="nav-icon">ğŸ </span>
      <span class="nav-label">Home</span>
    </div>
    <div class="nav-item" onclick="navigateTo('meditation')" data-page="meditation">
      <span class="nav-icon">ğŸ§˜</span>
      <span class="nav-label">Meditate</span>
    </div>
    <div class="nav-item" onclick="navigateTo('quotes')" data-page="quotes">
      <span class="nav-icon">ğŸ’¬</span>
      <span class="nav-label">Quotes</span>
    </div>
    <div class="nav-item" onclick="navigateTo('history')" data-page="history">
      <span class="nav-icon">ğŸ“Š</span>
      <span class="nav-label">History</span>
    </div>
  </div>
</nav>

<div class="modal-overlay" id="modal-tratak">
  <div class="modal-content">
    <button class="modal-close" onclick="closeModal('tratak')">âœ•</button>
    <div class="tratak-container">
      <h2 style="font-size:22px;font-weight:700;margin-bottom:4px">ğŸ•¯ï¸ Tratak Meditation</h2>
      <p style="color:var(--text-secondary);font-size:13px;margin-bottom:10px">Focus softly on the flame. Don't blink.</p>
      <div class="timer-options">
        <button class="timer-opt selected" onclick="setTratakTime(this,120)">2 min</button>
        <button class="timer-opt" onclick="setTratakTime(this,300)">5 min</button>
        <button class="timer-opt" onclick="setTratakTime(this,600)">10 min</button>
      </div>
      <div class="candle-wrapper">
        <div class="flame-glow"></div>
        <div class="flame-container"><div class="flame"></div></div>
        <div class="candle-wick"></div>
        <div class="candle-wax"></div>
        <div class="candle-body"></div>
      </div>
      <div style="font-size:42px;font-weight:200;margin:10px 0;font-variant-numeric:tabular-nums" id="tratakTimer">2:00</div>
      <div>
        <button class="control-btn play" onclick="toggleTratak()" id="tratakPlayBtn">â–¶</button>
        <button class="control-btn reset" onclick="resetTratak()">â†º</button>
      </div>
    </div>
  </div>
</div>

<div class="modal-overlay" id="modal-breathing">
  <div class="modal-content">
    <button class="modal-close" onclick="closeModal('breathing')">âœ•</button>
    <div class="breathing-container">
      <h2 style="font-size:22px;font-weight:700;margin-bottom:4px">ğŸŒ¬ï¸ Breathing Exercise</h2>
      <p style="color:var(--text-secondary);font-size:13px;margin-bottom:16px">Follow the circle rhythm</p>
      <div class="breath-type-selector">
        <button class="breath-type-btn selected" onclick="setBreathType(this,'box')">Box 4-4-4-4</button>
        <button class="breath-type-btn" onclick="setBreathType(this,'relax')">Relax 4-7-8</button>
      </div>
      <div class="timer-options" style="margin-top:12px">
        <button class="timer-opt selected" onclick="setBreathDuration(this,60)">1 min</button>
        <button class="timer-opt" onclick="setBreathDuration(this,180)">3 min</button>
        <button class="timer-opt" onclick="setBreathDuration(this,300)">5 min</button>
      </div>
      <div class="breath-circle-wrapper">
        <div class="breath-rings"></div>
        <div class="breath-rings"></div>
        <div class="breath-rings"></div>
        <div class="breath-circle" id="breathCircle">
          <span class="breath-text" id="breathText">Ready</span>
        </div>
      </div>
      <div style="font-size:36px;font-weight:200;margin:10px 0;font-variant-numeric:tabular-nums" id="breathTimer">1:00</div>
      <div>
        <button class="control-btn play" onclick="toggleBreathing()" id="breathPlayBtn">â–¶</button>
        <button class="control-btn reset" onclick="resetBreathing()">â†º</button>
      </div>
    </div>
  </div>
</div>

<div class="modal-overlay" id="modal-timer">
  <div class="modal-content">
    <button class="modal-close" onclick="closeModal('timer')">âœ•</button>
    <div class="timer-container">
      <h2 style="font-size:22px;font-weight:700;margin-bottom:4px">â±ï¸ Silent Meditation</h2>
      <p style="color:var(--text-secondary);font-size:13px;margin-bottom:16px">Sit still. Breathe naturally. Be present.</p>
      <div class="timer-options">
        <button class="timer-opt selected" onclick="setSilentTime(this,120)">2 min</button>
        <button class="timer-opt" onclick="setSilentTime(this,300)">5 min</button>
        <button class="timer-opt" onclick="setSilentTime(this,600)">10 min</button>
      </div>
      <div class="timer-ring-wrapper">
        <svg width="220" height="220" viewBox="0 0 220 220">
          <defs>
            <linearGradient id="timerGradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#6c5ce7"/>
              <stop offset="100%" style="stop-color:#06b6d4"/>
            </linearGradient>
          </defs>
          <circle class="timer-ring-bg" cx="110" cy="110" r="100"/>
          <circle class="timer-ring-progress" id="timerProgress" cx="110" cy="110" r="100"
            stroke-dasharray="628.32" stroke-dashoffset="0"/>
        </svg>
        <div class="timer-ring-text">
          <div class="time" id="silentTimerDisplay">2:00</div>
          <div class="label" id="silentTimerLabel">READY</div>
        </div>
      </div>
      <div>
        <button class="control-btn play" onclick="toggleSilentTimer()" id="silentPlayBtn">â–¶</button>
        <button class="control-btn reset" onclick="resetSilentTimer()">â†º</button>
      </div>
    </div>
  </div>
</div>

<div class="modal-overlay" id="modal-grounding">
  <div class="modal-content">
    <button class="modal-close" onclick="closeModal('grounding')">âœ•</button>
    <div class="grounding-container">
      <h2 style="font-size:22px;font-weight:700;margin-bottom:4px;text-align:center">ğŸŒ¿ 5-4-3-2-1 Grounding</h2>
      <p style="color:var(--text-secondary);font-size:13px;margin-bottom:24px;text-align:center">Tap each step as you complete it</p>
      <div class="grounding-step" onclick="completeGrounding(this)">
        <div class="grounding-num">5</div>
        <div class="grounding-label">Name <strong>5 things</strong> you can <strong>SEE</strong> ğŸ‘€</div>
        <div class="grounding-check">âœ…</div>
      </div>
      <div class="grounding-step" onclick="completeGrounding(this)">
        <div class="grounding-num">4</div>
        <div class="grounding-label">Name <strong>4 things</strong> you can <strong>TOUCH</strong> âœ‹</div>
        <div class="grounding-check">âœ…</div>
      </div>
      <div class="grounding-step" onclick="completeGrounding(this)">
        <div class="grounding-num">3</div>
        <div class="grounding-label">Name <strong>3 things</strong> you can <strong>HEAR</strong> ğŸ‘‚</div>
        <div class="grounding-check">âœ…</div>
      </div>
      <div class="grounding-step" onclick="completeGrounding(this)">
        <div class="grounding-num">2</div>
        <div class="grounding-label">Name <strong>2 things</strong> you can <strong>SMELL</strong> ğŸ‘ƒ</div>
        <div class="grounding-check">âœ…</div>
      </div>
      <div class="grounding-step" onclick="completeGrounding(this)">
        <div class="grounding-num">1</div>
        <div class="grounding-label">Name <strong>1 thing</strong> you can <strong>TASTE</strong> ğŸ‘…</div>
        <div class="grounding-check">âœ…</div>
      </div>
      <div class="reassurance" id="groundingComplete" style="display:none">
        <span class="reassure-icon">ğŸ‰</span>
        You're grounded. You're here. You're safe.<br>
        <strong>This moment is all that matters.</strong>
      </div>
    </div>
  </div>
</div>

<button onclick="goToChat()">Go to Chat</button>
<script src="script.js"></script>
</body>
</html>
